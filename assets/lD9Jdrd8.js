import{u as c}from"./BIsqqYM9.js";import{_ as u,k as d,c as n,a as e,t as a,y as f,F as m,z as h,o}from"./PhAEwGpo.js";const _={data(){return{inviter:null,referrals:[],tg:"where os",referralLink:void 0,refferalCaption:"Начни майнить ErmakCoin!",user:c()}},methods:{async fetchFriends(){try{const s=d(),r=await(await fetch(`${s.public.apiBase}/api/get_friends/?_user_id=${this.user.user_id}`)).json();this.inviter=r.inviter,this.referrals=r.referrals}catch(s){console.error("Ошибка при получении друзей:",s)}},async shareReferralLink(){c();try{const s=d(),r=await(await fetch(`${s.public.apiBase}/api/get_referral_link/?_user_id=${this.user.user_id}`)).json();console.log(r),this.referralLink=r.referral_link,console.log(this.referralLink),window.Telegram&&window.Telegram.WebApp?(window.Telegram.WebApp.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(this.referralLink)}&text=${this.refferalCaption}`),console.log("Открыто окно для отправки ссылки другу через Telegram")):(console.warn("Telegram WebApp API недоступен, открываем напрямую"),window.open(`https://t.me/share/url?url=${encodeURIComponent(referralLink.value)}&text=Присоединяйся к нам!`,"_blank"))}catch(s){console.error("Ошибка при отправке реферальной ссылки другу:",s)}}},mounted(){this.fetchFriends()}},g={class:"container mx-auto px-4 py-8 pb-[100px] bg-gradient-to-br from-green-500 to-indigo-500 h-screen text-white overflow-auto"},b={key:0,class:"mb-8 mt-[60px]"},x={class:"p-4 bg-blue-500 rounded-lg flex items-center justify-between"},v={class:"text-xl font-semibold"},w={class:"pt-[2px] text-sm font-lighter"},k={class:"mb-4"},y={key:0,class:"h- overflow-auto"},L={class:"text-xl font-semibold"},C={class:"pt-[2px] text-sm font-lighter"},T={key:1,class:"text-center"},$={class:"text-center"};function B(s,t,r,R,i,p){return o(),n("div",g,[i.inviter?(o(),n("div",b,[t[1]||(t[1]=e("h2",{class:"text-2xl font-bold mb-4"},"Вас пригласил:",-1)),e("div",x,[e("p",v,a(i.inviter.username),1),e("p",w,a(i.inviter.level),1)])])):f("",!0),e("div",k,[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold mb-4"},"Ваши рефералы:",-1)),i.referrals.length>0?(o(),n("div",y,[e("ul",null,[(o(!0),n(m,null,h(i.referrals,l=>(o(),n("div",{key:l.id,class:"p-4 py-3 bg-blue-500 rounded-lg flex items-center justify-between mb-2"},[e("p",L,a(l.username),1),e("p",C,a(l.level),1)]))),128))])])):(o(),n("div",T,t[2]||(t[2]=[e("p",null,"У вас пока нет рефералов.",-1)])))]),e("div",$,[e("button",{onClick:t[0]||(t[0]=l=>p.shareReferralLink(s.user_id)),class:"px-6 py-4 bg-green-500 text-white rounded-lg w-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-blue-400"}," Пригласить друга ")])])}const F=u(_,[["render",B],["__scopeId","data-v-5176bad6"]]);export{F as default};
