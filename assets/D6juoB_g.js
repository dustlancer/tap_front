import{u as p}from"./Dw54bE5G.js";import{_ as f,k as d,c as i,a as r,t as c,y as b,F as _,z as g,o as l}from"./D-cdejc-.js";const h={data(){return{inviter:null,referrals:[]}},methods:{async fetchFriends(){try{const t=d(),o=await(await fetch(`${t.public.apiBase}/api/get_friends/`)).json();this.inviter=o.inviter,this.referrals=o.referrals}catch(t){console.error("Ошибка при получении друзей:",t)}},async copyReferralLink(t){try{const e=d(),o=p(),a=(await(await fetch(`${e.public.apiBase}/api/get_referral_link?_user_id=${o.user_id}`)).json()).referral_link;await navigator.clipboard.writeText(a);try{const{webApp:n}=useWebApp();n.copyText(a)}catch(n){console.error("Ошибка при копировании реферальной ссылки в тг:",n)}alert("Реферальная ссылка скопирована в буфер обмена!")}catch(e){console.error("Ошибка при копировании реферальной ссылки:",e)}},async shareReferralLink(t){try{const e=d(),u=await(await fetch(`${e.public.apiBase}/api/get_referral_link/?user_id=${t}`)).json();this.referralLink=u.referral_link,window.open(`https://t.me/share/url?url=${encodeURIComponent(this.referralLink)}&text=Присоединяйся к нам!aaa`,"_blank");const{webApp:s}=useWebApp();s?s.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(this.referralLink)}&text=Присоединяйся к нам!`):alert("WebApp API недоступен.")}catch(e){console.error("Ошибка при отправке реферальной ссылки другу:",e)}}},mounted(){this.fetchFriends()}},m={class:"container mx-auto px-4 py-8 bg-gradient-to-br from-green-500 to-indigo-500 h-screen"},k={key:0,class:"mb-8"},v={class:"p-4 bg-gray-100 rounded-lg"},x={class:"text-xl font-semibold"},y={class:"mb-8"},w={key:0},L={class:"text-xl font-semibold"},R={key:1},A={class:"text-center"},B={class:"text-center"};function C(t,e,o,u,s,a){return l(),i("div",m,[s.inviter?(l(),i("div",k,[e[2]||(e[2]=r("h2",{class:"text-2xl font-bold mb-4"},"Вас пригласил:",-1)),r("div",v,[r("p",x,c(s.inviter.username),1),r("p",null,"Уровень: "+c(s.inviter.level),1)])])):b("",!0),r("div",y,[e[4]||(e[4]=r("h2",{class:"text-2xl font-bold mb-4"},"Ваши рефералы:",-1)),s.referrals.length>0?(l(),i("div",w,[r("ul",null,[(l(!0),i(_,null,g(s.referrals,n=>(l(),i("li",{key:n.id,class:"p-4 bg-gray-100 rounded-lg mb-2"},[r("p",L,c(n.username),1),r("p",null,"Уровень: "+c(n.level),1)]))),128))])])):(l(),i("div",R,e[3]||(e[3]=[r("p",null,"У вас пока нет рефералов.",-1)])))]),r("div",A,[r("button",{onClick:e[0]||(e[0]=n=>a.copyReferralLink(t.user_id)),class:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400"}," Скопировать реферальную ссылку ")]),r("div",B,[r("button",{onClick:e[1]||(e[1]=n=>a.shareReferralLink(t.user_id)),class:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400"}," Поделиться ссылкой с другом ")])])}const I=f(h,[["render",C],["__scopeId","data-v-c8374782"]]);export{I as default};
