import{u as p}from"./sBZATHrE.js";import{_ as f,k as d,c as n,a as r,t as i,y as g,F as m,z as h,o}from"./BA2JeEAk.js";const _={data(){return{inviter:null,referrals:[],tg:"where os",referralLink:void 0,refferalCaption:"Начни майнить ErmakCoin!"}},methods:{async fetchFriends(){try{const s=d(),l=await(await fetch(`${s.public.apiBase}/api/get_friends/`)).json();this.inviter=l.inviter,this.referrals=l.referrals}catch(s){console.error("Ошибка при получении друзей:",s)}},async shareReferralLink(){const s=p();try{const e=d(),c=await(await fetch(`${e.public.apiBase}/api/get_referral_link/?_user_id=${s.user_id}`)).json();console.log(c),this.referralLink=c.referral_link,console.log(this.referralLink),window.Telegram&&window.Telegram.WebApp?(window.Telegram.WebApp.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(this.referralLink)}&text=${this.refferalCaption}`),console.log("Открыто окно для отправки ссылки другу через Telegram")):(console.warn("Telegram WebApp API недоступен, открываем напрямую"),window.open(`https://t.me/share/url?url=${encodeURIComponent(referralLink.value)}&text=Присоединяйся к нам!`,"_blank"))}catch(e){console.error("Ошибка при отправке реферальной ссылки другу:",e)}}},mounted(){this.fetchFriends()}},b={class:"container mx-auto px-4 py-8 bg-gradient-to-br from-green-500 to-indigo-500 h-screen"},k={key:0,class:"mb-8"},v={class:"p-4 bg-gray-100 rounded-lg"},x={class:"text-xl font-semibold"},w={class:"mb-8"},y={key:0},L={class:"text-xl font-semibold"},C={key:1},T={class:"text-center"};function B(s,e,l,c,t,u){return o(),n("div",b,[t.inviter?(o(),n("div",k,[e[1]||(e[1]=r("h2",{class:"text-2xl font-bold mb-4"},"Вас пригласил:",-1)),r("div",v,[r("p",x,i(t.inviter.username),1),r("p",null,"Уровень: "+i(t.inviter.level),1)])])):g("",!0),r("div",w,[e[3]||(e[3]=r("h2",{class:"text-2xl font-bold mb-4"},"Ваши рефералы:",-1)),t.referrals.length>0?(o(),n("div",y,[r("ul",null,[(o(!0),n(m,null,h(t.referrals,a=>(o(),n("li",{key:a.id,class:"p-4 bg-gray-100 rounded-lg mb-2"},[r("p",L,i(a.username),1),r("p",null,"Уровень: "+i(a.level),1)]))),128))])])):(o(),n("div",C,e[2]||(e[2]=[r("p",null,"У вас пока нет рефералов.",-1)]))),r("h1",null,i(t.tg),1)]),r("div",T,[r("button",{onClick:e[0]||(e[0]=a=>u.shareReferralLink(s.user_id)),class:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400"}," Поделиться ссылкой с другом ")])])}const F=f(_,[["render",B],["__scopeId","data-v-b73229e7"]]);export{F as default};
