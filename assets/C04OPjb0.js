import{u as p}from"./CFKubES3.js";import{_ as f,k as d,c as n,a as s,t as c,y as _,F as b,z as g,o as i}from"./Co1lCMeY.js";const m={data(){return{inviter:null,referrals:[]}},methods:{async fetchFriends(){try{const r=d(),l=await(await fetch(`${r.public.apiBase}/api/get_friends/`)).json();this.inviter=l.inviter,this.referrals=l.referrals}catch(r){console.error("Ошибка при получении друзей:",r)}},async copyReferralLink(r){try{const e=d(),l=p(),a=(await(await fetch(`${e.public.apiBase}/api/get_referral_link?_user_id=${l.user_id}`)).json()).referral_link;await navigator.clipboard.writeText(a);try{const{webApp:t}=useWebApp();t.copyText(a)}catch(t){console.error("Ошибка при копировании реферальной ссылки в тг:",t)}alert("Реферальная ссылка скопирована в буфер обмена!")}catch(e){console.error("Ошибка при копировании реферальной ссылки:",e)}}},mounted(){this.fetchFriends()}},h={class:"container mx-auto px-4 py-8 bg-gradient-to-br from-green-500 to-indigo-500 h-screen"},v={key:0,class:"mb-8"},y={class:"p-4 bg-gray-100 rounded-lg"},x={class:"text-xl font-semibold"},k={class:"mb-8"},w={key:0},B={class:"text-xl font-semibold"},F={key:1},L={class:"text-center"};function C(r,e,l,u,o,a){return i(),n("div",h,[o.inviter?(i(),n("div",v,[e[1]||(e[1]=s("h2",{class:"text-2xl font-bold mb-4"},"Вас пригласил:",-1)),s("div",y,[s("p",x,c(o.inviter.username),1),s("p",null,"Уровень: "+c(o.inviter.level),1)])])):_("",!0),s("div",k,[e[3]||(e[3]=s("h2",{class:"text-2xl font-bold mb-4"},"Ваши рефералы:",-1)),o.referrals.length>0?(i(),n("div",w,[s("ul",null,[(i(!0),n(b,null,g(o.referrals,t=>(i(),n("li",{key:t.id,class:"p-4 bg-gray-100 rounded-lg mb-2"},[s("p",B,c(t.username),1),s("p",null,"Уровень: "+c(t.level),1)]))),128))])])):(i(),n("div",F,e[2]||(e[2]=[s("p",null,"У вас пока нет рефералов.",-1)])))]),s("div",L,[s("button",{onClick:e[0]||(e[0]=t=>a.copyReferralLink(r.user_id)),class:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400"}," Скопировать реферальную ссылку ")])])}const A=f(m,[["render",C],["__scopeId","data-v-5b9bd505"]]);export{A as default};
